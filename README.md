# hornet2 (仮称)

**ドキュメント駆動型 API テストツール**

[Arazzo Specification](https://spec.openapis.org/arazzo/) と OpenAPI を活用し、
**API ドキュメントを充実させるだけで自動テストが実現できる**新しい開発体験を提供します。

## 🎯 コンセプト

- **OpenAPI/Arazzo を書く = テストを書く**
  `example` や `x-examples` を充実させ、Arazzo でワークフローを定義するだけで、自動テストが動く世界を目指します。

- **グラフィカルな可視化**
  API コールフローをビジュアルで把握。開発者にもQAエンジニアにも、システムの挙動が一目でわかります。

- **AI 時代の API テスト基盤**
  標準化された YAML 形式により、LLM がテストシナリオを理解・生成しやすくなります。

- **シングルバイナリ + Web UI**
  Rust 製の軽量バイナリ一つで完結。サーバーモードで起動すれば、モダンな SPA として UI が利用できます。

## ✨ 特徴

### 1. 標準仕様準拠

- **OpenAPI 3.x** と **Arazzo Specification** をベースに、再利用可能な API テストを構築
- 既存の OpenAPI 定義を活かし、追加の学習コストを最小化

### 2. 段階的な実装戦略

- **Phase 1**: Arazzo/OpenAPI の可視化（フロー図生成）
- **Phase 2**: 外部ツール（k6 など）への変換・実行
- **Phase 3**: Rust 製の高速実行エンジンの内製化

### 3. 豊富なレポート機能

- CLI / JSON / HTML 出力
- インタラクティブな Web UI でのフロー可視化
- レスポンスタイム分析・エラー率の可視化

### 4. CI/CD & ローカル開発の両対応

- **QA/SETエンジニア**: CI パイプラインでの自動テスト実行
- **バックエンド開発者**: ローカルでの動作確認・デバッグ

## 📊 競合ツールとの比較

| ツール | 特徴 | hornet2 の違い |
|--------|------|---------------|
| **Postman/Newman** | GUI 中心、コレクション管理 | YAML 駆動、標準仕様準拠 |
| **k6** | JavaScript 記述、高性能負荷試験 | 宣言的、可視化重視、標準仕様準拠 |
| **JMeter** | 多機能だが重い GUI | 軽量シングルバイナリ、モダンな UX |
| **Dredd/Schemathesis** | OpenAPI テストのみ | Arazzo ワークフロー対応、フロー可視化 |

**差別化ポイント**:
- Arazzo による**ワークフロー定義の標準化**
- **ドキュメント = テスト**という体験設計
- **AI との連携**を見据えた構造化データ
- 最終的には **Rust 製高速エンジン**による省メモリ・高速実行

## 🔧 ロードマップ

### Phase 1: 可視化 (MVP)
- [ ] OpenAPI / Arazzo YAML パーサー
- [ ] フロー図の生成（グラフ構造への変換）
- [ ] Web UI での可視化
- [ ] CLI での基本操作

### Phase 2: テスト実行
- [ ] 外部ツール（k6 など）への DSL 変換
- [ ] テスト実行の自動化
- [ ] 結果レポートの生成

### Phase 3: 高速エンジン化
- [ ] Rust 製 HTTP クライアントの実装
- [ ] 負荷試験機能（RPS/VU/Ramp-up）
- [ ] 並列実行・非同期最適化

### 将来的な拡張
- SaaS 版（結果の保存・共有、分散負荷試験）
- カスタムフック・プラグイン機構
- Prometheus / OTLP エクスポート

## 🧪 想定ユースケース

### ✅ 典型的なシナリオ
- **ユーザー登録 → ログイン → プロフィール更新**の一連フローテスト
- **OpenAPI の example から Arazzo を自動生成**してスモークテスト実行
- **マイクロサービス間の依存関係**をフロー図で可視化・検証
- **CI/CD パイプライン**での自動 API テスト

### 🎯 開発フロー
1. OpenAPI に `example` / `x-examples` を記述
2. Arazzo でワークフロー（ステップ間のデータ受け渡し）を定義
3. `hornet2 visualize` でフローを確認
4. `hornet2 run` でテスト実行
5. HTML レポートで結果確認

## 📄 ライセンス

MIT License （予定）

---

今後、仕様・設計・MVP について随時更新予定です。
